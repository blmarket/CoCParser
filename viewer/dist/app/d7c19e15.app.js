(function(){"use strict";angular.module("cocViewerApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ab-base64"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){return b.otherwise("/"),c.html5Mode(!0)}])}).call(this),function(){"use strict";angular.module("cocViewerApp").controller("BoardCtrl",["$scope","$resource","base64",function(a,b){var c;c=b("http://coc.blmarket.net/api/muut"),c.get(function(a){$("#muut").muut(a)})}])}.call(this),function(){"use strict";var a;a="http://coc.blmarket.net",angular.module("cocViewerApp").controller("EffectivesCtrl",["$stateParams","$scope","$resource","$filter","$location",function(b,c,d,e,f){var g,h,i;g=d(a+"/v0/effectives/date/:date",b),i=f.search().source_id,h=e("orderBy"),g.query({},function(a){c.entries=null!=i?h(a,function(a){var b;return b=_.filter(a.data,function(a){return String(a.src_id)===i}),-b.length}):a})}])}.call(this),function(){"use strict";var a;angular.module("cocViewerApp").config(["$stateProvider",function(a){return a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("date",{url:"/date/:date",templateUrl:"app/main/main.html",controller:"DateCtrl"}).state("user",{url:"/user/:name",templateUrl:"app/main/user.html",controller:"UserCtrl"}).state("check",{url:"/check",templateUrl:"app/main/check.html",controller:"CheckCtrl"}).state("effectives",{url:"/effectives/:date",templateUrl:"app/main/effectives.html",controller:"EffectivesCtrl"})}]),a=function(a){var b,c,d,e,f,g,h,i;for(i=[],d=0,f=a.length;f>d;d++){for(b=a[d],b.tag_obj={},h=b.tags,e=0,g=h.length;g>e;e++)c=h[e],b.tag_obj[c.name]=c.value;i.push(b)}return i},angular.module("cocViewerApp").controller("MainCtrl",["$scope","$resource",function(b,c){var d;d=c("http://coc.blmarket.net/tags/recent"),b.entries=[],d.query({},function(c){b.entries=a(c),b.date=b.entries[0].date})}]).controller("DateCtrl",["$stateParams","$scope","$resource",function(b,c,d){var e;e=d("http://coc.blmarket.net/tags/date/:date",b),c.entries=[],e.query({},function(b){c.entries=a(b)})}]).controller("UserCtrl",["$stateParams","$scope","$resource",function(b,c,d){var e;e=d("http://coc.blmarket.net/tags/search/:name",b),c.entries=[],e.query({},function(b){var d,e,f,g,h;c.entries=a(b),g=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)f=b[a],d=f.date,e.push({x:new Date(""+d.slice(0,4)+"-"+d.slice(4,6)+"-"+d.slice(6,8)).getTime(),y:-Number(f.tag_obj.clan_place)});return e}(),h=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)f=b[a],d=f.date,e.push({x:new Date(""+d.slice(0,4)+"-"+d.slice(4,6)+"-"+d.slice(6,8)).getTime(),y:Number(f.tag_obj.total_stars)});return e}(),e=function(a,b,c,d,e){nv.addGraph(function(){var f;return f=nv.models.lineChart(),f.xAxis.axisLabel("Date").tickFormat(function(a){return d3.time.format("%x")(new Date(a))}),f.yAxis.tickFormat(b),d3.select(a).datum([{values:e,key:c,color:d}]).call(f),nv.utils.windowResize(f.update),f})},e("#rankChart svg",function(a){return d3.format(".02f")(-a)},"Rank","#ff0000",g),e("#starChart svg",d3.format("d"),"Stars","#00ff00",h)})}]).controller("CheckCtrl",["$scope","$resource","$http",function(a,b,c){var d;d=b("http://coc.blmarket.net/tags/:id"),a.entries=[],a.submit=function(a){d.save({id:a.id},a)},a.cleanup=function(){c({method:"GET",url:"http://coc.blmarket.net/tags/cleanup"}).success(function(){alert("Cleanup complete")}).error(function(){alert("Somewhat wrong happened")})},a.audit_all=function(){var b,c,e,f,g;for(b=0,g=a.entries,e=0,f=g.length;f>e;e++)c=g[e],b+=1,d.save({id:c.id},c,function(){return b-=1,0===b?a.load():void 0})},a.load=function(){a.entries=d.query({filter:""},function(b){b=b.slice(0,10),a.entries=b.sort(function(a,b){return a.name!==b.name?a.name>b.name?1:-1:a.value!==b.value?a.value>b.value?1:-1:0})})},a.load()}])}.call(this),function(){"use strict";angular.module("cocViewerApp").factory("Modal",["$rootScope","$modal",function(a,b){var c;return c=function(c,d){var e;return e=a.$new(),c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})},{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d,e;b=Array.prototype.slice.call(arguments),e=b.shift(),d=void 0,d=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){d.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){d.dismiss(a)}}]}},"modal-danger"),d.result.then(function(c){a.apply(c,b)})}}}}}])}.call(this),function(){"use strict";angular.module("cocViewerApp").controller("NavbarCtrl",["$scope","$location",function(a,b){return a.menu=[{title:"Home",link:"/","class":""},{title:"Effectives",link:"/effectives/recent","class":""}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}])}.call(this),angular.module("cocViewerApp").run(["$templateCache",function(a){"use strict";a.put("app/main/board.html","<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><a id=muut href=https://muut.com/i/cockorea>CoCKorea</a></div><footer class=footer><div class=container><p>CoCParser viewer v0.1.0 | <a href=https://twitter.com/blmarket>@blmarket</a></p></div></footer>"),a.put("app/main/check.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><button type=button ng-click=load() class="btn btn-default">Reload</button><button type=button ng-click=audit_all() class="btn btn-default">Audit all</button><button type=button ng-click=cleanup() class="btn btn-default">Remove duplicate rows</button></div><div class=row><div class=col-lg-12><div ng-repeat="tag in entries"><img src="{{tag.data_url}}"><form ng-submit=submit(tag)><label for={{tag.name}}>{{ tag.name }}</label><input id={{tag.name}} name={{tag.name}} ng-model="tag.value"><span style="margin-left: 20px">probability {{ tag.probability }}</span></form></div></div></div></div><footer class=footer><div class=container><p>CoCParser viewer v0.1.0 | <a href=https://twitter.com/blmarket>@blmarket</a></p></div></footer>'),a.put("app/main/effectives.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><header id=banner class=hero-unit><div class=container><p class=lead><font color=red><span>Experimental</span></font><span>&nbsp;Effective Stars viewer</span></p></div></header><div class="container effectives"><div class=row><div class=col-lg-12><div ng-repeat="group in entries"><hr><div ng-repeat="it in group.data" class=group><img src="{{ it.data_url }}" class="img-responsive"><span>&nbsp; {{ it.atk_id }}</span></div></div></div></div></div><footer class=footer><div class=container><p>CoCParser viewer v0.1.0 | <a href=https://twitter.com/blmarket>@blmarket</a></p></div></footer>'),a.put("app/main/main.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><header id=banner class=hero-unit><div class=container><p class=lead>Clash of clans KOREA 클랜 전적관리 프로그램</p></div></header><div class=container><div class=row><div class=col-lg-12><div><h1 class=header>Last Updated: {{ date }}</h1></div><div ng-repeat="it in entries"><div><a href="/user/{{ it.tag_obj.name }}"><img style=display:inline src="{{ it.image_url }}" class="img-responsive"></a>&nbsp;<a href="/effectives/{{date}}?source_id={{it.id}}" class=btn><span class=badge>{{ it.tag_obj.most }}</span></a></div></div></div></div></div><footer class=footer><div class=container><p>CoCParser viewer v0.1.0 | <a href=https://twitter.com/blmarket>@blmarket</a></p></div></footer>'),a.put("app/main/user.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><header id=banner class=hero-unit><div class=container><h2>참여율... 중요합니다.</h2></div></header><div class=container><div class=row><div id=rankChart><svg></svg></div><div id=starChart><svg></svg></div></div></div><div class=container><div class=row><div class=col-lg-12><div ng-repeat="it in entries"><div ng-if="($index % 5) == 0"><h4>{{ it.date }}</h4></div><div><img src="{{ it.image_url }}" class="img-responsive"></div></div></div></div></div><footer class=footer><div class=container><p>CoCParser viewer v0.1.0 | <a href=https://twitter.com/blmarket>@blmarket</a></p></div></footer>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div ng-controller=NavbarCtrl class="navbar navbar-default navbar-static-top"><div class=container><div class=navbar-header><button type=button ng-click="isCollapsed = !isCollapsed" class=navbar-toggle><span class=sr-only>Toggle navigation</span><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button><a href="/" class=navbar-brand>CoCParser Viewer</a></div><div id=navbar-main collapse=isCollapsed class="navbar-collapse collapse"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}} ng-class=item.class class=btn>{{item.title}}</a></li></ul></div></div></div>')}]);